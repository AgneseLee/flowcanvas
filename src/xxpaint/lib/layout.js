"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getIsChangeLine = exports.getPreLayout = void 0;
var getPreLayout = function (targetNode) {
    var cur = targetNode.pre;
    if (cur) {
        return {
            width: cur.processedLocation.width,
            height: cur.processedLocation.height,
            x: cur.renderStyle.contentX,
            y: cur.renderStyle.contentY,
        };
    }
    return {
        width: 0,
        height: 0,
        x: _getContainerLayout(targetNode.parent).contentX,
        y: _getContainerLayout(targetNode.parent).contentY,
    };
};
exports.getPreLayout = getPreLayout;
function _getContainerLayout(container) {
    if (!container) {
        if (!container) {
            debugger;
        }
        container = {
            renderStyles: {
                width: container.processedLocation.width,
                height: container.processedLocation.height,
                paddingTop: 0,
                paddingBottom: 0,
                paddingLeft: 0,
                paddingRight: 0,
                marginLeft: 0,
                marginRight: 0,
                marginTop: 0,
                marginBottom: 0,
            },
            x: 0,
            y: 0,
            contentX: 0,
            contentY: 0,
        };
    }
    return {
        width: container.processedLocation.width,
        height: container.processedLocation.height,
        x: container.x,
        y: container.y,
        paddingTop: container.css.paddingTop ? container.css.paddingTop.toPx() : 0,
        paddingBottom: container.css.paddingBottom ? container.css.paddingBottom.toPx() : 0,
        paddingLeft: container.css.paddingLeft ? container.css.paddingLeft.toPx() : 0,
        paddingRight: container.css.paddingRight ? container.css.paddingRight.toPx() : 0,
        marginLeft: container.css.marginLeft ? container.css.marginLeft.toPx() : 0,
        marginRight: container.css.marginRight ? container.css.marginRight.toPx() : 0,
        marginTop: container.css.marginTop ? container.css.marginTop.toPx() : 0,
        marginBottom: container.css.marginBottom ? container.css.marginBottom.toPx() : 0,
        contentX: container.renderStyle.contentX,
        contentY: container.renderStyle.contentY,
    };
}
var getIsChangeLine = function (targetNode) {
    var parent = targetNode.parent;
    var pre = targetNode.pre;
    if (pre) {
        if (pre.type && pre.type === 'block') {
            targetNode.isLines = true;
        }
        else {
            var _a = _getContainerLayout(parent), pw = _a.width, ph = _a.height;
            var _b = exports.getPreLayout(targetNode), x = _b.x, y = _b.y, preW = _b.width, preH = _b.height;
            var childPaddingLeft = targetNode.css.paddingLeft ? targetNode.css.paddingLeft.toPx() : 0;
            var childMarginLeft = targetNode.css.marginLeft ? targetNode.css.marginLeft.toPx() : 0;
            var currW = targetNode.processedLocation.width;
            var nextStartX = x + preW + childPaddingLeft + childMarginLeft + currW;
            targetNode.isLines = nextStartX >= pw;
        }
    }
    else {
        targetNode.isLines = false;
    }
    return targetNode.isLines;
};
exports.getIsChangeLine = getIsChangeLine;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5b3V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGF5b3V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUtPLElBQU0sWUFBWSxHQUFHLFVBQUMsVUFBVTtJQUNyQyxJQUFNLEdBQUcsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDO0lBRTNCLElBQUksR0FBRyxFQUFFO1FBQ1AsT0FBTztZQUNMLEtBQUssRUFBRSxHQUFHLENBQUMsaUJBQWlCLENBQUMsS0FBSztZQUNsQyxNQUFNLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLE1BQU07WUFDcEMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxXQUFXLENBQUMsUUFBUTtZQUMzQixDQUFDLEVBQUUsR0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRO1NBQzVCLENBQUM7S0FDSDtJQUNELE9BQU87UUFDTCxLQUFLLEVBQUUsQ0FBQztRQUNSLE1BQU0sRUFBRSxDQUFDO1FBQ1QsQ0FBQyxFQUFFLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRO1FBQ2xELENBQUMsRUFBRSxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUTtLQUNuRCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBakJXLFFBQUEsWUFBWSxnQkFpQnZCO0FBTUYsU0FBUyxtQkFBbUIsQ0FBQyxTQUFTO0lBRXBDLElBQUksQ0FBQyxTQUFTLEVBQUU7UUFFZCxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2QsUUFBUSxDQUFDO1NBQ1Y7UUFDRCxTQUFTLEdBQUc7WUFDVixZQUFZLEVBQUU7Z0JBQ1osS0FBSyxFQUFFLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLO2dCQUN4QyxNQUFNLEVBQUUsU0FBUyxDQUFDLGlCQUFpQixDQUFDLE1BQU07Z0JBQzFDLFVBQVUsRUFBRSxDQUFDO2dCQUNiLGFBQWEsRUFBRSxDQUFDO2dCQUNoQixXQUFXLEVBQUUsQ0FBQztnQkFDZCxZQUFZLEVBQUUsQ0FBQztn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LGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVGLElBQU0sZUFBZSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pGLElBQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUM7WUFDakQsSUFBTSxVQUFVLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxnQkFBZ0IsR0FBRyxlQUFlLEdBQUcsS0FBSyxDQUFDO1lBRXpFLFVBQVUsQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFJLEVBQUUsQ0FBQztTQUN2QztLQUVGO1NBQU07UUFFTCxVQUFVLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztLQUM1QjtJQUNELE9BQU8sVUFBVSxDQUFDLE9BQU8sQ0FBQztBQUM1QixDQUFDLENBQUM7QUF6QlcsUUFBQSxlQUFlLG1CQXlCMUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiDojrflj5bliY3kuIDkuKrlhYTlvJ/oioLngrnvvIjml6DliY3kuIDkuKrlhYTlvJ/oioLngrnliJnor7vlj5bniLboioLngrnnmoTvvInnmoTlrr3pq5jkvY3nva5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXROb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRQcmVMYXlvdXQgPSAodGFyZ2V0Tm9kZSkgPT4ge1xuICBjb25zdCBjdXIgPSB0YXJnZXROb2RlLnByZTtcbiAgLy8g5aaC5p6c5rKh5pyJ5YmN5LiA5Liq5oiW6ICF5YmN6Z2i55qE6YO95LiN5Zyo5paH5qGj5rWB5Lit77yM6I635Y+W5a655Zmo55qEXG4gIGlmIChjdXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGN1ci5wcm9jZXNzZWRMb2NhdGlvbi53aWR0aCxcbiAgICAgIGhlaWdodDogY3VyLnByb2Nlc3NlZExvY2F0aW9uLmhlaWdodCxcbiAgICAgIHg6IGN1ci5yZW5kZXJTdHlsZS5jb250ZW50WCxcbiAgICAgIHk6IGN1ci5yZW5kZXJTdHlsZS5jb250ZW50WSxcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwLFxuICAgIHg6IF9nZXRDb250YWluZXJMYXlvdXQodGFyZ2V0Tm9kZS5wYXJlbnQpLmNvbnRlbnRYLFxuICAgIHk6IF9nZXRDb250YWluZXJMYXlvdXQodGFyZ2V0Tm9kZS5wYXJlbnQpLmNvbnRlbnRZLFxuICB9O1xufTtcblxuLyoqXG4gKiDojrflj5bniLboioLngrnlrr3pq5jkvY3nva5wYWRkaW5nL21hcmdpbuWxnuaAp1xuICogQHBhcmFtIHtvYmplY3R9IGNvbnRhaW5lciDniLboioLngrlcbiAqL1xuZnVuY3Rpb24gX2dldENvbnRhaW5lckxheW91dChjb250YWluZXIpIHtcbiAgLy8gZGVidWdnZXJcbiAgaWYgKCFjb250YWluZXIpIHtcbiAgICAvLyByb290XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIGRlYnVnZ2VyO1xuICAgIH1cbiAgICBjb250YWluZXIgPSB7XG4gICAgICByZW5kZXJTdHlsZXM6IHtcbiAgICAgICAgd2lkdGg6IGNvbnRhaW5lci5wcm9jZXNzZWRMb2NhdGlvbi53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBjb250YWluZXIucHJvY2Vzc2VkTG9jYXRpb24uaGVpZ2h0LFxuICAgICAgICBwYWRkaW5nVG9wOiAwLFxuICAgICAgICBwYWRkaW5nQm90dG9tOiAwLFxuICAgICAgICBwYWRkaW5nTGVmdDogMCxcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiAwLFxuICAgICAgICBtYXJnaW5MZWZ0OiAwLFxuICAgICAgICBtYXJnaW5SaWdodDogMCxcbiAgICAgICAgbWFyZ2luVG9wOiAwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgICAgIC8vIGNvbnRlbnRXaWR0aDogY29udGFpbmVyLnByb2Nlc3NlZExvY2F0aW9uLndpZHRoLFxuICAgICAgICAvLyBjb250ZW50SGVpZ2h0OiBjb250YWluZXIucHJvY2Vzc2VkTG9jYXRpb24uaGVpZ2h0XG4gICAgICB9LFxuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBjb250ZW50WDogMCxcbiAgICAgIGNvbnRlbnRZOiAwLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogY29udGFpbmVyLnByb2Nlc3NlZExvY2F0aW9uLndpZHRoLFxuICAgIGhlaWdodDogY29udGFpbmVyLnByb2Nlc3NlZExvY2F0aW9uLmhlaWdodCxcbiAgICB4OiBjb250YWluZXIueCxcbiAgICB5OiBjb250YWluZXIueSxcbiAgICBwYWRkaW5nVG9wOiBjb250YWluZXIuY3NzLnBhZGRpbmdUb3AgPyBjb250YWluZXIuY3NzLnBhZGRpbmdUb3AudG9QeCgpIDogMCxcbiAgICBwYWRkaW5nQm90dG9tOiBjb250YWluZXIuY3NzLnBhZGRpbmdCb3R0b20gPyBjb250YWluZXIuY3NzLnBhZGRpbmdCb3R0b20udG9QeCgpIDogMCxcbiAgICBwYWRkaW5nTGVmdDogY29udGFpbmVyLmNzcy5wYWRkaW5nTGVmdCA/IGNvbnRhaW5lci5jc3MucGFkZGluZ0xlZnQudG9QeCgpIDogMCxcbiAgICBwYWRkaW5nUmlnaHQ6IGNvbnRhaW5lci5jc3MucGFkZGluZ1JpZ2h0ID8gY29udGFpbmVyLmNzcy5wYWRkaW5nUmlnaHQudG9QeCgpIDogMCxcbiAgICBtYXJnaW5MZWZ0OiBjb250YWluZXIuY3NzLm1hcmdpbkxlZnQgPyBjb250YWluZXIuY3NzLm1hcmdpbkxlZnQudG9QeCgpIDogMCxcbiAgICBtYXJnaW5SaWdodDogY29udGFpbmVyLmNzcy5tYXJnaW5SaWdodCA/IGNvbnRhaW5lci5jc3MubWFyZ2luUmlnaHQudG9QeCgpIDogMCxcbiAgICBtYXJnaW5Ub3A6IGNvbnRhaW5lci5jc3MubWFyZ2luVG9wID8gY29udGFpbmVyLmNzcy5tYXJnaW5Ub3AudG9QeCgpIDogMCxcbiAgICBtYXJnaW5Cb3R0b206IGNvbnRhaW5lci5jc3MubWFyZ2luQm90dG9tID8gY29udGFpbmVyLmNzcy5tYXJnaW5Cb3R0b20udG9QeCgpIDogMCxcbiAgICBjb250ZW50WDogY29udGFpbmVyLnJlbmRlclN0eWxlLmNvbnRlbnRYLFxuICAgIGNvbnRlbnRZOiBjb250YWluZXIucmVuZGVyU3R5bGUuY29udGVudFksXG4gICAgLy8gY29udGVudFdpZHRoOiBjb250YWluZXIucmVuZGVyU3R5bGVzLmNvbnRlbnRXaWR0aCxcbiAgICAvLyBjb250ZW50SGVpZ2h0OiBjb250YWluZXIucmVuZGVyU3R5bGVzLmNvbnRlbnRIZWlnaHRcbiAgfTtcbn1cblxuLyoqXG4gKiDoioLngrnmmK/lkKbmjaLooYxcbiAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXROb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRJc0NoYW5nZUxpbmUgPSAodGFyZ2V0Tm9kZSkgPT4ge1xuICAvLyBkZWJ1Z2dlclxuICBjb25zdCBwYXJlbnQgPSB0YXJnZXROb2RlLnBhcmVudDtcbiAgY29uc3QgcHJlID0gdGFyZ2V0Tm9kZS5wcmU7XG4gIGlmIChwcmUpIHtcbiAgICAvLyDpnZ7nrKzkuIDkuKrlrZDoioLngrlcbiAgICBpZiAocHJlLnR5cGUgJiYgcHJlLnR5cGUgPT09ICdibG9jaycpIHtcbiAgICAgIC8vIOWJjeS4gOS4quWFhOW8n+iKgueCueaYr2Jsb2Nr77yM5b2T5YmN6IqC54K55b+F6aG75o2i6KGMXG4gICAgICB0YXJnZXROb2RlLmlzTGluZXMgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHdpZHRoOiBwdywgaGVpZ2h0OiBwaCB9ID0gX2dldENvbnRhaW5lckxheW91dChwYXJlbnQpO1xuICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aDogcHJlVywgaGVpZ2h0OiBwcmVIIH0gPSBnZXRQcmVMYXlvdXQodGFyZ2V0Tm9kZSk7XG4gICAgICBjb25zdCBjaGlsZFBhZGRpbmdMZWZ0ID0gdGFyZ2V0Tm9kZS5jc3MucGFkZGluZ0xlZnQgPyB0YXJnZXROb2RlLmNzcy5wYWRkaW5nTGVmdC50b1B4KCkgOiAwO1xuICAgICAgY29uc3QgY2hpbGRNYXJnaW5MZWZ0ID0gdGFyZ2V0Tm9kZS5jc3MubWFyZ2luTGVmdCA/IHRhcmdldE5vZGUuY3NzLm1hcmdpbkxlZnQudG9QeCgpIDogMDtcbiAgICAgIGNvbnN0IGN1cnJXID0gdGFyZ2V0Tm9kZS5wcm9jZXNzZWRMb2NhdGlvbi53aWR0aDtcbiAgICAgIGNvbnN0IG5leHRTdGFydFggPSB4ICsgcHJlVyArIGNoaWxkUGFkZGluZ0xlZnQgKyBjaGlsZE1hcmdpbkxlZnQgKyBjdXJyVztcblxuICAgICAgdGFyZ2V0Tm9kZS5pc0xpbmVzID0gbmV4dFN0YXJ0WCA+PSBwdztcbiAgICB9XG4gICAgLy8gZGVidWdnZXJcbiAgfSBlbHNlIHtcbiAgICAvLyDnrKzkuIDkuKrlrZDoioLngrnkuI3pnIDliKTmlq3mmK/lkKbmjaLooYxcbiAgICB0YXJnZXROb2RlLmlzTGluZXMgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0Tm9kZS5pc0xpbmVzO1xufTtcbiJdfQ==